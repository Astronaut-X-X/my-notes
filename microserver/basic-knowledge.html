<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>微服务基础知识 | Astronaut-X-X</title><meta name="description" content="微服务基础知识">
    <link rel="preload" href="/my-notes/assets/style-fcc36540.css" as="style"><link rel="stylesheet" href="/my-notes/assets/style-fcc36540.css">
    <link rel="modulepreload" href="/my-notes/assets/app-37f26d3f.js"><link rel="modulepreload" href="/my-notes/assets/framework-efe98465.js"><link rel="modulepreload" href="/my-notes/assets/basic-knowledge.html-7372dc9f.js"><link rel="modulepreload" href="/my-notes/assets/basic-knowledge.html-420ac88d.js"><link rel="prefetch" href="/my-notes/assets/index.html-b06a5697.js" as="script"><link rel="prefetch" href="/my-notes/assets/work.html-1bfbb694.js" as="script"><link rel="prefetch" href="/my-notes/assets/index.html-345b9107.js" as="script"><link rel="prefetch" href="/my-notes/assets/slice.html-6270dad0.js" as="script"><link rel="prefetch" href="/my-notes/assets/blob.html-72c8a89b.js" as="script"><link rel="prefetch" href="/my-notes/assets/file.html-113f4246.js" as="script"><link rel="prefetch" href="/my-notes/assets/note.html-2a418283.js" as="script"><link rel="prefetch" href="/my-notes/assets/go-kit_1.html-79d631cd.js" as="script"><link rel="prefetch" href="/my-notes/assets/go-kit_2.html-4d555c47.js" as="script"><link rel="prefetch" href="/my-notes/assets/go-kit_3.html-84e6d9d2.js" as="script"><link rel="prefetch" href="/my-notes/assets/index.html-e45ba432.js" as="script"><link rel="prefetch" href="/my-notes/assets/index.html-1d1b5d8b.js" as="script"><link rel="prefetch" href="/my-notes/assets/proxy.html-dc594906.js" as="script"><link rel="prefetch" href="/my-notes/assets/tcp.html-f144c584.js" as="script"><link rel="prefetch" href="/my-notes/assets/makefile.html-0b2305fa.js" as="script"><link rel="prefetch" href="/my-notes/assets/index.html-8b53d2c8.js" as="script"><link rel="prefetch" href="/my-notes/assets/index.html-d0fc6458.js" as="script"><link rel="prefetch" href="/my-notes/assets/vimrc.html-ddc939db.js" as="script"><link rel="prefetch" href="/my-notes/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/my-notes/assets/index.html-77706562.js" as="script"><link rel="prefetch" href="/my-notes/assets/work.html-bccbf26b.js" as="script"><link rel="prefetch" href="/my-notes/assets/index.html-469664fa.js" as="script"><link rel="prefetch" href="/my-notes/assets/slice.html-ab2a9fc6.js" as="script"><link rel="prefetch" href="/my-notes/assets/blob.html-717cffcb.js" as="script"><link rel="prefetch" href="/my-notes/assets/file.html-68a7a994.js" as="script"><link rel="prefetch" href="/my-notes/assets/note.html-2db79e68.js" as="script"><link rel="prefetch" href="/my-notes/assets/go-kit_1.html-138d7ae9.js" as="script"><link rel="prefetch" href="/my-notes/assets/go-kit_2.html-3de6c000.js" as="script"><link rel="prefetch" href="/my-notes/assets/go-kit_3.html-0558ad24.js" as="script"><link rel="prefetch" href="/my-notes/assets/index.html-9dd6fd95.js" as="script"><link rel="prefetch" href="/my-notes/assets/index.html-2c808bac.js" as="script"><link rel="prefetch" href="/my-notes/assets/proxy.html-db2aadca.js" as="script"><link rel="prefetch" href="/my-notes/assets/tcp.html-9bdb91b0.js" as="script"><link rel="prefetch" href="/my-notes/assets/makefile.html-047037e5.js" as="script"><link rel="prefetch" href="/my-notes/assets/index.html-00d4a1a8.js" as="script"><link rel="prefetch" href="/my-notes/assets/index.html-88f8e8e4.js" as="script"><link rel="prefetch" href="/my-notes/assets/vimrc.html-bfee8ad4.js" as="script"><link rel="prefetch" href="/my-notes/assets/404.html-ebc5def2.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/my-notes/" class=""><!----><span class="site-name">Astronaut-X-X</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/my-notes/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/my-notes/microserver/basic-knowledge.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/my-notes/en/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/my-notes/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/my-notes/microserver/basic-knowledge.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/my-notes/en/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">笔记 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/my-notes/" class="sidebar-item" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">微服务 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/my-notes/microserver/basic-knowledge.md" class="sidebar-item active" aria-label="基础知识"><!--[--><!--]--> 基础知识 <!--[--><!--]--></a><!----></li><li><a href="/my-notes/microserver/go-kit_1.md" class="sidebar-item" aria-label="Go-kit 1"><!--[--><!--]--> Go-kit 1 <!--[--><!--]--></a><!----></li><li><a href="/my-notes/microserver/go-kit_2.md" class="sidebar-item" aria-label="Go-kit 2"><!--[--><!--]--> Go-kit 2 <!--[--><!--]--></a><!----></li><li><a href="/my-notes/microserver/go-kit_3.md" class="sidebar-item" aria-label="Go-kit 3"><!--[--><!--]--> Go-kit 3 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Golang <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/my-notes/golang/slice.md" class="sidebar-item" aria-label="Slice"><!--[--><!--]--> Slice <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">网络 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/my-notes/network/tcp.md" class="sidebar-item" aria-label="TCP"><!--[--><!--]--> TCP <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">其他 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/my-notes/other/makefile.md" class="sidebar-item" aria-label="Makefile"><!--[--><!--]--> Makefile <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="微服务基础知识" tabindex="-1"><a class="header-anchor" href="#微服务基础知识" aria-hidden="true">#</a> 微服务基础知识</h1><p>要说清楚微服务，就要先说清楚单体架构。</p><p>单体架构简单地说，即所有的业务功能都由一个程序或一个进程提供。一个程序就完成所需要的所有功能。常见的 Web 服务基本都是一个服务完成了所有业务功能，但随着业务的增加，越来越多的服务交织在一起。当业务代码没有做好模块化的时候，修改某个服务的代价越来越高，维护一个整个服务的成本越来越高，可读性有越来越差。</p><p>单体架构也被称为 巨石架构 （monolithic software）</p><p>因此出现了一种架构思想，SOA（service-oriented architecture）定义了一种可通过服务接口复用软件组件并实现其互操作的方法。<br> 将整体的业务抽成许多个独立的服务，服务与服务之间可以互相调用并且可以独立部署。这样带来的优势有很多<br> 1、某个服务崩溃了，即单点故障，不会影响其他服务的正常运行，不过依赖该服务的服务可能会受到影响。<br> 2、当服务被拆分后，每个服务都是独立的并对外提供服务，单个服务只需要确保自身的服务没问题，不需要考虑其他服务，大大降低的开发和后续维护的难度。<br> 3、提高了服务的可用性，可以增加某些服务的部署数量，将业务压力较大的服务增加服务提供实例的个数，并通过负载均衡达到高可用的目的，与分布式类似。<br> 4、可以构成异构的服务体系，即使用 C++ 完成部分需要较高运算效率的服务，GO 完成 Web 部分的服务，不同语言完成的服务可以通过 统一的通讯协议，互相调用。</p><p>困难： 1、服务的拆分需要仔细考虑，服务拆分的粒度也需要仔细考虑，粒度过小，增加重复地工作了，由于每个服务都需要大量地基础设置<br> 2、整体服务的测试<br> 4、循环调用 5、服务不可用<br> 6、服务互相之间如何知道对方，对方的状态，是否可用</p><p>为了解决上述的困难引入了如下的概念： 1、注册中心，在多个相同的服务时，引入了负载均衡的策略 2、熔断、降级、限流 3、链接追踪 4、数据统计 5、日志系统</p><p>其他： 服务配置 服务隔离</p><p>请求编解码 在 RPC 调用的过程中，存在请求响应的编解码过程，以 gRPC 为例子， gRPC 通过定义了 protobuf 的数据对象，服务端接收到请求后需要对请求解码，解码出服务需要的数据，<br> 在服务调用完成后将响应数据经过编码后返回，而客户端的操作与之相反，客户端调用服务，发送请求，需要把请求数据经过编码，然后发送给服务端，服务端返回的数据，数据需要<br> 解码，然后就是响应的数据。</p><p>消息可以分为两种消息 请求与响应消息 分别对应服务的输入参数与输出参数</p><div class="language-mermaid line-numbers-mode" data-ext="mermaid"><pre class="language-mermaid"><code><span class="token keyword">flowchart</span> LR
    客户端 <span class="token inter-arrow-label"><span class="token arrow-head arrow operator">-.</span> <span class="token label property">请求</span> <span class="token arrow operator">.-&gt;</span></span> 服务端
    服务端 <span class="token inter-arrow-label"><span class="token arrow-head arrow operator">-.</span> <span class="token label property">响应</span> <span class="token arrow operator">.-&gt;</span></span> 客户端
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编解码消息</p><div class="language-mermaid line-numbers-mode" data-ext="mermaid"><pre class="language-mermaid"><code><span class="token keyword">flowchart</span> LR
    消息 <span class="token inter-arrow-label"><span class="token arrow-head arrow operator">-.</span> <span class="token label property">编码</span> <span class="token arrow operator">.-&gt;</span></span> 编码消息 <span class="token inter-arrow-label"><span class="token arrow-head arrow operator">-.</span> <span class="token label property">解码</span> <span class="token arrow operator">.-&gt;</span></span> 消息
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mermaid line-numbers-mode" data-ext="mermaid"><pre class="language-mermaid"><code><span class="token keyword">flowchart</span> LR
    <span class="token keyword">subgraph</span> 客户端
        调用服务 <span class="token inter-arrow-label"><span class="token arrow-head arrow operator">-.</span> <span class="token label property">请求数据</span> <span class="token arrow operator">.-&gt;</span></span> 编码
    <span class="token keyword">end</span>
    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> 编码（请求） -. 编码请求 .-&gt; 接收请求
        接收响应 -. 解码（响应） .-&gt; 响应数据
    end

    subgraph 服务端
        接收请求 -. 解码（请求） .- &gt; 请求数据（S） 
        请求数据（S） -. 服务调用 .-&gt; 响应数据
        编码（响应）-. 编码响应 .-&gt; 接收响应
    end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="服务发现" tabindex="-1"><a class="header-anchor" href="#服务发现" aria-hidden="true">#</a> 服务发现</h3><p>注册中心，健康检测</p><h4 id="参考链接" tabindex="-1"><a class="header-anchor" href="#参考链接" aria-hidden="true">#</a> 参考链接</h4><p><a href="https://www.ruanyifeng.com/blog/2022/04/microservice.html" target="_blank" rel="noopener noreferrer">微服务是什么？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://www.ruanyifeng.com/blog/2021/05/scaling-problem.html" target="_blank" rel="noopener noreferrer">软件工程的最大难题<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="http://peter.bourgon.org/go-kit/" target="_blank" rel="noopener noreferrer">Go kit: Go in the modern enterprise<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 307680186@qq.com">Astronaut-X-X</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/my-notes/" class="" aria-label="笔记"><!--[--><!--]--> 笔记 <!--[--><!--]--></a></span><span class="next"><a href="/my-notes/" class="" aria-label="笔记"><!--[--><!--]--> 笔记 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/my-notes/assets/app-37f26d3f.js" defer></script>
  </body>
</html>
